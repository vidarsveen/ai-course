<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safety, Quality & Governance in Production LLMs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .pipeline-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1rem;
            margin: 2rem 0;
            align-items: flex-start;
        }

        .pipeline-stage {
            background: #1f2937;
            border: 2px solid #374151;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            position: relative;
        }

        .pipeline-stage.input {
            border-color: #60a5fa;
            background: linear-gradient(135deg, #0f172a 0%, #1f2937 100%);
        }

        .pipeline-stage.filter {
            border-color: #f87171;
            background: linear-gradient(135deg, #7f1d1d 0%, #1f2937 100%);
        }

        .pipeline-stage.core {
            border-color: #6366f1;
            background: linear-gradient(135deg, #4c1d95 0%, #1f2937 100%);
        }

        .pipeline-stage.output {
            border-color: #34d399;
            background: linear-gradient(135deg, #064e3b 0%, #1f2937 100%);
        }

        .stage-label {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #9ca3af;
            margin-bottom: 0.5rem;
        }

        .stage-name {
            font-weight: 600;
            font-size: 0.95rem;
            color: #fff;
            margin-bottom: 0.75rem;
        }

        .stage-detail {
            font-size: 0.8rem;
            color: #d1d5db;
            line-height: 1.4;
        }

        .arrow {
            position: absolute;
            top: 50%;
            right: -20px;
            width: 20px;
            height: 2px;
            background: #6366f1;
            transform: translateY(-50%);
        }

        .arrow::after {
            content: '';
            position: absolute;
            right: -4px;
            top: -3px;
            width: 0;
            height: 0;
            border-left: 8px solid #6366f1;
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
        }

        .section-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin: 2rem 0;
        }

        .concept-card {
            background: #1f2937;
            border-left: 4px solid #6366f1;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .concept-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #60a5fa;
            margin-bottom: 1rem;
        }

        .concept-content {
            font-size: 0.95rem;
            color: #d1d5db;
            line-height: 1.6;
        }

        .evaluation-table {
            width: 100%;
            margin: 1.5rem 0;
            border-collapse: collapse;
            background: #111827;
            border-radius: 8px;
            overflow: hidden;
        }

        .evaluation-table th {
            background: #1f2937;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #374151;
            color: #60a5fa;
            font-size: 0.9rem;
        }

        .evaluation-table td {
            padding: 0.75rem;
            border-bottom: 1px solid #374151;
            color: #d1d5db;
            font-size: 0.9rem;
        }

        .evaluation-table tr:last-child td {
            border-bottom: none;
        }

        .abtest-flow {
            display: grid;
            grid-template-columns: 1fr auto 1fr auto 1fr;
            gap: 1rem;
            align-items: center;
            margin: 1.5rem 0;
        }

        .abtest-variant {
            background: #111827;
            border: 1px solid #374151;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .abtest-label {
            font-weight: 600;
            color: #60a5fa;
            margin-bottom: 0.5rem;
        }

        .abtest-example {
            font-size: 0.85rem;
            color: #9ca3af;
            font-style: italic;
        }

        .comparison-op {
            font-size: 1.5rem;
            color: #6366f1;
            font-weight: bold;
        }

        .metric-box {
            background: #1f2937;
            border-left: 4px solid #34d399;
            padding: 1rem;
            border-radius: 4px;
            margin: 0.75rem 0;
            font-size: 0.9rem;
        }

        .alignment-principle {
            background: rgba(99, 102, 241, 0.1);
            border-left: 4px solid #6366f1;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
        }

        @media (max-width: 1400px) {
            .pipeline-container {
                grid-template-columns: repeat(4, 1fr);
            }

            .arrow {
                display: none;
            }
        }

        @media (max-width: 1024px) {
            .pipeline-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .section-grid {
                grid-template-columns: 1fr;
            }

            .abtest-flow {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-12">
            <h1 class="text-3xl font-bold text-white mb-2">Safety, Quality & Governance System</h1>
            <p class="text-gray-400">How production LLMs ensure reliability, safety, and alignment</p>
        </header>

        <!-- Main Pipeline -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-white mb-6">The Production LLM Pipeline</h2>

            <div class="pipeline-container">
                <!-- User Input -->
                <div class="pipeline-stage input">
                    <div class="stage-label">Step 1</div>
                    <div class="stage-name">User Input</div>
                    <div class="stage-detail">User sends a prompt or question</div>
                    <div class="arrow"></div>
                </div>

                <!-- Input Safety Filter -->
                <div class="pipeline-stage filter">
                    <div class="stage-label">Safety Check</div>
                    <div class="stage-name">Input Filter</div>
                    <div class="stage-detail">Detects harmful/malicious prompts</div>
                    <div class="arrow"></div>
                </div>

                <!-- Guardrails -->
                <div class="pipeline-stage filter">
                    <div class="stage-label">Policy Layer</div>
                    <div class="stage-name">Guardrails</div>
                    <div class="stage-detail">Allow/deny lists, topic constraints</div>
                    <div class="arrow"></div>
                </div>

                <!-- LLM Core -->
                <div class="pipeline-stage core">
                    <div class="stage-label">AI Model</div>
                    <div class="stage-name">LLM</div>
                    <div class="stage-detail">Aligned model generates response</div>
                    <div class="arrow"></div>
                </div>

                <!-- Output Safety Filter -->
                <div class="pipeline-stage filter">
                    <div class="stage-label">Safety Check</div>
                    <div class="stage-name">Output Filter</div>
                    <div class="stage-detail">Blocks unsafe outputs</div>
                    <div class="arrow"></div>
                </div>

                <!-- Grounding -->
                <div class="pipeline-stage output">
                    <div class="stage-label">Trust</div>
                    <div class="stage-name">Grounded Answer</div>
                    <div class="stage-detail">Add citations, sources</div>
                    <div class="arrow"></div>
                </div>

                <!-- User Sees -->
                <div class="pipeline-stage output">
                    <div class="stage-label">Result</div>
                    <div class="stage-name">Safe Output</div>
                    <div class="stage-detail">User receives verified response</div>
                </div>
            </div>

            <div class="p-4 bg-gray-800 border-l-4 border-indigo-400 rounded mt-6">
                <p class="text-gray-300 text-sm leading-relaxed">
                    This pipeline ensures that every response is <strong>safe</strong> (filtered for harmful content), <strong>compliant</strong> (respects guardrails), <strong>aligned</strong> (trained to be helpful, honest, harmless), and <strong>grounded</strong> (backed by sources).
                </p>
            </div>
        </section>

        <!-- Core Concepts Grid -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-white mb-6">Core Safety & Quality Concepts</h2>

            <div class="section-grid">
                <!-- Guardrails -->
                <div class="concept-card">
                    <div class="concept-title">Guardrails</div>
                    <div class="concept-content">
                        <p class="mb-3">Rules that constrain LLM behavior. Examples include:</p>
                        <div class="metric-box">
                            <strong>Allow Lists:</strong> Only topics the model can discuss
                        </div>
                        <div class="metric-box">
                            <strong>Deny Lists:</strong> Topics the model cannot discuss (e.g., illegal activities, medical advice)
                        </div>
                        <div class="metric-box">
                            <strong>Format Rules:</strong> Output must be JSON, max 500 words, etc.
                        </div>
                        <p class="text-gray-400 text-sm mt-3">Often implemented as a separate layer that filters input/output.</p>
                    </div>
                </div>

                <!-- Safety Filters -->
                <div class="concept-card" style="border-left-color: #f87171;">
                    <div class="concept-title" style="color: #f87171;">Safety Filters</div>
                    <div class="concept-content">
                        <p class="mb-3">Systems that detect and block harmful content:</p>
                        <div class="metric-box" style="border-left-color: #f87171;">
                            <strong>Input Filters:</strong> Stop jailbreak attempts, prompt injection
                        </div>
                        <div class="metric-box" style="border-left-color: #f87171;">
                            <strong>Output Filters:</strong> Catch hate speech, violence, bias
                        </div>
                        <p class="text-gray-400 text-sm mt-3">Trained via "red-teaming"—testing with harmful examples to improve detection.</p>
                    </div>
                </div>

                <!-- Grounded Answering -->
                <div class="concept-card" style="border-left-color: #34d399;">
                    <div class="concept-title" style="color: #34d399;">Grounded Answering</div>
                    <div class="concept-content">
                        <p class="mb-3">Answers tied to verifiable sources:</p>
                        <div class="metric-box" style="border-left-color: #34d399;">
                            <strong>With RAG:</strong> "The capital of France is Paris [Source: Wikipedia]"
                        </div>
                        <div class="metric-box" style="border-left-color: #34d399;">
                            <strong>Provenance:</strong> Show exactly which document the answer came from
                        </div>
                        <p class="text-gray-400 text-sm mt-3">Dramatically reduces hallucinations and builds user trust.</p>
                    </div>
                </div>

                <!-- AI Alignment -->
                <div class="concept-card" style="border-left-color: #a78bfa;">
                    <div class="concept-title" style="color: #a78bfa;">AI Alignment</div>
                    <div class="concept-content">
                        <p class="mb-3">Ensuring the model's goals match human values:</p>
                        <div class="metric-box" style="border-left-color: #a78bfa;">
                            <strong>The Problem:</strong> Model trained to "predict next token" ≠ "be helpful, honest, harmless"
                        </div>
                        <div class="metric-box" style="border-left-color: #a78bfa;">
                            <strong>The Solution:</strong> RLHF (Reinforcement Learning from Human Feedback) to align behavior
                        </div>
                        <p class="text-gray-400 text-sm mt-3">The underlying philosophy behind all other safety measures.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Evaluation Metrics -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-white mb-6">Evaluation Metrics</h2>
            <p class="text-gray-300 text-sm mb-4">How developers measure quality, safety, and efficiency:</p>

            <table class="evaluation-table">
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>What It Measures</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Accuracy</strong></td>
                        <td>Correctness of answers on a test set</td>
                        <td>Model gets 92/100 questions right (92%)</td>
                    </tr>
                    <tr>
                        <td><strong>Faithfulness</strong></td>
                        <td>Does the answer match the source documents?</td>
                        <td>Summary accurately reflects the original text</td>
                    </tr>
                    <tr>
                        <td><strong>Latency</strong></td>
                        <td>How fast is the response? (measured in seconds)</td>
                        <td>Response generated in 1.2 seconds</td>
                    </tr>
                    <tr>
                        <td><strong>Cost</strong></td>
                        <td>How much does it cost to run? (per 1K tokens)</td>
                        <td>$0.001 per 1K input tokens</td>
                    </tr>
                    <tr>
                        <td><strong>Safety Score</strong></td>
                        <td>How many unsafe outputs does the model produce?</td>
                        <td>Model blocks 99.5% of harmful inputs</td>
                    </tr>
                    <tr>
                        <td><strong>User Rating</strong></td>
                        <td>Do real users find the output helpful?</td>
                        <td>Average user rating: 4.2/5 stars</td>
                    </tr>
                </tbody>
            </table>

            <div class="alignment-principle">
                <strong>Why Multiple Metrics Matter:</strong> A model might be accurate but slow. Another might be fast but have safety issues. Developers use multiple metrics to balance performance, safety, cost, and user experience.
            </div>
        </section>

        <!-- A/B Prompt Testing -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-white mb-6">A/B Prompt Testing</h2>
            <p class="text-gray-300 text-sm mb-4">How developers optimize prompts using real data:</p>

            <div class="abtest-flow">
                <div class="abtest-variant">
                    <div class="abtest-label">Variant A</div>
                    <div class="abtest-example">"Summarize this text concisely."</div>
                </div>

                <div class="comparison-op">⚖️</div>

                <div class="abtest-variant">
                    <div class="abtest-label">Variant B</div>
                    <div class="abtest-example">"Summarize in 3 bullet points, focusing on key facts."</div>
                </div>

                <div class="comparison-op">→</div>

                <div class="abtest-variant">
                    <div class="abtest-label">Winner</div>
                    <div class="abtest-example">Variant B wins with higher user ratings</div>
                </div>
            </div>

            <div class="section-grid mt-6">
                <div class="concept-card">
                    <div class="concept-title">The Process</div>
                    <div class="concept-content">
                        <div class="metric-box">1. Create two or more prompt variants</div>
                        <div class="metric-box">2. Randomly serve them to real users (50/50 split)</div>
                        <div class="metric-box">3. Measure performance (accuracy, speed, user rating)</div>
                        <div class="metric-box">4. Deploy the winning variant</div>
                    </div>
                </div>

                <div class="concept-card">
                    <div class="concept-title">Why It Works</div>
                    <div class="concept-content">
                        <p class="mb-3">Guessing which prompt is "better" is unreliable. A/B testing:</p>
                        <div class="metric-box">✓ Data-driven (not subjective)</div>
                        <div class="metric-box">✓ Uses real user feedback</div>
                        <div class="metric-box">✓ Continuous improvement cycle</div>
                        <div class="metric-box">✓ Measures actual impact on metrics</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- System Integration -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-6">How It All Works Together</h2>

            <div class="space-y-4 max-w-3xl mx-auto">
                <div class="alignment-principle">
                    <strong>AI Alignment (Foundation):</strong> The model is trained to be helpful, honest, and harmless through RLHF. This is the philosophical bedrock.
                </div>

                <div class="alignment-principle">
                    <strong>Guardrails + Filters (Prevention):</strong> Rules and ML-based filters prevent harmful content from entering or leaving the system.
                </div>

                <div class="alignment-principle">
                    <strong>Grounded Answering (Trust):</strong> Responses backed by sources build user confidence and reduce hallucinations.
                </div>

                <div class="alignment-principle">
                    <strong>Evaluation Metrics (Measurement):</strong> Quantitative measures ensure the system is performing as intended across multiple dimensions.
                </div>

                <div class="alignment-principle">
                    <strong>A/B Testing (Optimization):</strong> Data-driven experimentation continuously improves prompt performance and user experience.
                </div>

                <div class="p-4 bg-gray-800 border-l-4 border-green-400 rounded mt-6">
                    <p class="text-gray-300 text-sm leading-relaxed">
                        <strong>The Result:</strong> A production LLM system that is safe, reliable, fast, cost-effective, and continuously improving. Every component reinforces the others.
                    </p>
                </div>
            </div>
        </section>

    </div>

</body>
</html>
